<!DOCTYPE html>
<html lang="ru">
    <head>
        <!DOCTYPE html>
<html lang="ru">

    <head>

        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />

        <meta property="og:title" content=" Допиливание Vim &middot;  Илья Маринин" />
        <meta property="og:site_name" content="Илья Маринин" />
        <meta property="og:url" content="https://ilmarin.github.io/post/healthy-vim/" />
        <link rel="shortcut icon" href="https://ilmarin.github.io/favicon.ico" type="image/x-icon">
        <link rel="icon" href="https://ilmarin.github.io/favicon.ico" type="image/x-icon">

    
        <meta property="og:type" content="article" />
        <meta property="og:article:published_time" content="2018-01-31T11:52:02&#43;05:00" />
        <meta property="og:article:tag" content="vim" />
        

        
            <meta property="og:description" content="Превращаем Vim в полноценный редактор текстов" />
        

        <meta name="twitter:card" content="summary" />
        <meta name="twitter:site" content="@ilya_marinin" />
        <meta name="twitter:creator" content="@ilya_marinin" />
        <meta name="twitter:title" content="Допиливание Vim" />
        <meta name="twitter:description" content="Превращаем Vim в полноценный редактор текстов" />
        <meta name="twitter:url" content="https://ilmarin.github.io/post/healthy-vim/" />
    

        <title> Допиливание Vim &middot;  Илья Маринин - блог о программировании</title>

    
        <meta name="description" content="Превращаем Vim в полноценный редактор текстов" />
    

        <meta name="MobileOptimized" content="320" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />

        
        

    
        <link href="https://ilmarin.github.io/index.xml" rel="alternate" type="application/rss+xml" title="Илья Маринин" />
    

    
        <link rel="canonical" href="https://ilmarin.github.io/post/healthy-vim/" />
        <link rel="stylesheet" href="https://ilmarin.github.io/css/crisp.css?20170725">
    </head>
    <body>
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-56828941-2', 'auto');
            ga('send', 'pageview');
        </script>
        <header id="header">
            <a id="logo" href="https://ilmarin.github.io/">
                <img src="https://ilmarin.github.io/img/logo.jpg" alt="Илья Маринин" />
            </a>
            <a style="font-size: 1.9em" href="https://ilmarin.github.io/">MARININ</a>
            <p>Меня зовут Илья Маринин. Я веб-разработчик, а это мой личный блог. Если у вас есть пожелания или предложения, <a href="mailto:ilya(at)marinin.pw">напишите мне</a>.</p>

            <div id="follow-icons">
        <a href="http://github.com/ilmarin" rel="me"><i class="fa fa-github-square fa-2x"></i></a>
	<a href="http://linkedin.com/in/ilya-marinin-bbb931a6" rel="me"><i class="fa fa-linkedin-square fa-2x"></i></a>
	<a href="https://ilmarin.github.io/index.xml" rel="me"><i class="fa fa-rss-square fa-2x"></i></a> 
</div>  
            
        </header>

    </head>
    <div id="layout" class="pure-g">
        <div class="sidebar pure-u-1 pure-u-md-1-6">
            

        </div>
        <div class="content pure-u-1 pure-u-md-5-6">
            <div class="article singlepage" id="" class="post">
                <div class="post-stamp">
                    <h1 class="post-title">Допиливание Vim</h1>
                    <span class="post-date">Jan 31, 2018</span>
                    

                    <span class="taglist">
                    
                        &middot;
                        
                            <a href="https://ilmarin.github.io/tags/vim/">vim</a>
                        
                    
                    </span>
                </div>
                

<p>Vim &mdash; отличный редактор, позволяющий очень быстро выполнять рутинные операции с текстом. Однако для комфортной работы Vim требует базовой настройки и периода привыкания. В данной заметке я приведу список изменений, которые позволят комфортно использовать Vim для любых операций, а не только для редактирования различных файлов настроек.</p>

<p>Перечень тем:</p>

<ul>
<li>создание файла настроек .vimrc;</li>
<li>установка менеджера плагинов;</li>
<li>корректная работа с переключение раскладки;</li>
<li>установка набора сниппетов для более быстрого редактирования кода и разметки;</li>
<li>добавление проверки орфографии;</li>
<li>применение темы оформления;</li>
<li>корректный перенос текста.</li>
</ul>

<p>Все настройки я буду описывать применительно к Ubuntu 16.04.</p>

<h2 id="создание-файла-настроек">Создание файла настроек</h2>

<p>Первым делом нам нужно создать файл настроек редактора, если такового еще нет. Именно в нем мы будем прописывать наши настройки.</p>

<p>Открываем Vim и выполняем:</p>

<pre><code class="language-bash">:e ~/.vimrc
:r $VIMRUNTIME/vimrc_example.vim
:w
</code></pre>

<p>Файл настроек создан.</p>

<h2 id="установка-менеджера-плагинов">Установка менеджера плагинов</h2>

<p>Vim поддерживает плагины, которые сильно расширяют его функциональность. Проблема в том, что вручную управлять плагинами неудобно и папка .vim быстро превращается в бардак. Менеджер плагинов автоматизирует установку расширений и сам чистит ненужные плагины.</p>

<p>Установим менеджер плагинов Vim-plug:</p>

<pre><code class="language-bash">$ curl -fLo ~/.vim/autoload/plug.vim --create-dirs \
    https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim
</code></pre>

<h2 id="корректное-переключение-раскладки">Корректное переключение раскладки</h2>

<p>Главная проблема Vim для русскоязычных пользователей &mdash; постоянная необходимость переключать раскладку при работе с текстом.</p>

<p>Решений этой проблемы как минимум три.</p>

<p>Самый простой вариант прописать в .vimrc:</p>

<pre><code>set langmap=ФИСВУАПРШОЛДЬТЩЗЙКЫЕГМЦЧНЯЖ;ABCDEFGHIJKLMNOPQRSTUVWXYZ:,
фисвуапршолдьтщзйкыегмцчня;abcdefghijklmnopqrstuvwxyz
</code></pre>

<p>Проблема с этим вариантом в том, что для пунктуации маппинг не работает.</p>

<p>Второе по сложности решениие описано <a href="https://habrahabr.ru/post/98393/" target="_blank">здесь</a>. Оно плохо тем, что приходится запоминать новую комбинацию клавиш для переключениия раскладки.</p>

<p>Самый радикальный же вариант (он же самый сложный) подробно описан <a href="https://habrahabr.ru/post/175709/" target="_blank">тут</a>. Здесь я приведу его краткую версию для Ubuntu.</p>

<h3 id="установка-xkb-switch">Установка xkb-switch</h3>

<p>Нам понадобится выполнить следующие команды:</p>

<pre><code>$ git clone https://github.com/ierton/xkb-switch
$ cd xkb-switch
$ sudo apt-get install build-essential cmake libx11-dev libxext-dev libxtst-dev libxkbfile-dev
$ mkdir build &amp;&amp; cd build
$ cmake ..
$ make
$ sudo make install
</code></pre>

<p>Проверяем работу программы:</p>

<pre><code>$ xkb-switch
</code></pre>

<p>Если все хорошо и программа выполняется, то переходим к настройке Vim.</p>

<p>До этого мы не настраивали менеджер плагинов, который установили ранее. Этим и займемся.</p>

<h3 id="настройка-vim">Настройка Vim</h3>

<p>Открываем .vimrc и пишем внизу:</p>

<pre><code>call plug#begin('~/.vim/plugged')

Plug 'lyokha/vim-xkbswitch'

let g:XkbSwitchEnabled = 1
let g:XkbSwitchIMappings = ['ru']

call plug#end()
</code></pre>

<p>Сохраняем изменения, выполнив <code>:w</code>.</p>

<p>Применяем новый конфиг:</p>

<pre><code>:so ~/.vimrc
</code></pre>

<p>Для установки плагина выполняем:</p>

<pre><code>:PlugInstall
</code></pre>

<p>После завершений устновки выходим из окна, нажав <strong>q</strong>. Можно вовсе закрыть Vim, выполнив <strong>ZZ</strong>.</p>

<h3 id="проверка-работы-плагина">Проверка работы плагина</h3>

<p>Открываем Vim. Входим в режим вставки, нажав <strong>i</strong>.</p>

<p>Переключаем раскладку на русскую и вводим текст. Нажимаем <strong>ESC</strong>. Видим, что раскалдка после нажатия <strong>ESC</strong> переключилась на английскую автоматически. Теперь, если мы снова войдем в режим редактирования, то менять раскладку на русскую уже не нужно. Очень удобно.</p>

<h2 id="установка-сниппетов">Установка сниппетов</h2>

<p>Сниппеты &mdash; это маленькие кусочки кода, которые работают как аналог <a href="https://ilmarin.github.io/post/netbeans_hotkeys">шаблонов кода</a> в NetBeans.</p>

<h3 id="установка-расширений">Установка расширений</h3>

<p>В .vimrc прописываем над <code>call plug#end()</code>:</p>

<pre><code>Plug 'SirVer/ultisnips' | Plug 'honza/vim-snippets'

&quot; Trigger configuration. Do not use &lt;tab&gt; if you use https://github.com/Valloric/YouCompleteMe.
let g:UltiSnipsExpandTrigger=&quot;&lt;tab&gt;&quot;
let g:UltiSnipsJumpForwardTrigger=&quot;&lt;c-b&gt;&quot;
let g:UltiSnipsJumpBackwardTrigger=&quot;&lt;c-z&gt;&quot;
</code></pre>

<p>Сохраняем файл, применяем конфигурацию и выполняем <code>:PlugInstall</code>.</p>

<p>Сами правила для сниппетов можно посмотреть на <a href="https://github.com/honza/vim-snippets" target="_blank">странице</a> плагина.</p>

<p>Для разыменовывания сниппета нажимаем <strong>Tab</strong>, для перемещения по доступным для заполнения местам вперед и назад жмем <strong>Ctrl+b</strong> и <strong>Ctrl+z</strong>.</p>

<h3 id="проверка-работы">Проверка работы</h3>

<p>Создаем файл:</p>

<pre><code>$ vim test.sh
</code></pre>

<p>Входим в режим вставки и вводим <code>#!</code>. Жмем <strong>Tab</strong> и видим, что конструкция разыменовалась в <code>#!/bin/bash</code>.</p>

<h2 id="проверка-орфографии">Проверка орфографии</h2>

<p>Подробная инструкция есть, например, <a href="http://funix.ru/programs_utilities/proverka-orfografii-v-vim.html" target="_blank">здесь</a>. Ниже краткие выдержки.</p>

<p>Идем на специальный <a href="ftp://ftp.vim.org/pub/vim/runtime/spell/" target="_blank">сервер</a> и берем оттуда файлы <strong>ru.utf-8.spl</strong> и <strong>ru.utf-8.sug</strong>.</p>

<p>Файлы нам нужно скопировать в папку <strong>~/.vim/spell</strong>.</p>

<p>Теперь настроим Vim. В .vimrc пишем:</p>

<pre><code>:setlocal spell spelllang=ru_ru,en_us
</code></pre>

<p>Или для поклонников буквы &laquo;ё&raquo; можно прописать:</p>

<pre><code>:setlocal spell spelllang=ru_yo,en_us
</code></pre>

<p>Команды по работе со словарями хорошо описаны по ссылке выше. Вот их краткий перечень:</p>

<ul>
<li><strong>]s</strong> &mdash; устанавливает курсор на следующее выделенное слово</li>

<li><p><strong>[s</strong> &mdash; устанавливает курсор на предыдущее выделенное слово.</p></li>

<li><p><strong>zg</strong> &mdash; добавляет слово, находящееся под курсором;</p></li>

<li><p><strong>zG</strong> &mdash; то же, что и zg, но слово будет добавлено только для текущей сессии работы;</p></li>

<li><p><strong>zw</strong> &mdash; то же, что и zg, однако слово будет помечено как ошибочно-написанное;</p></li>

<li><p><strong>zW</strong> &mdash; то же, что и zw, однако слово будет добавлено только для текущей сессии работы.</p></li>

<li><p><strong>zug</strong> и <strong>zuw</strong> &mdash; отменяет действие zg и zw соответственно;</p></li>

<li><p><strong>zuG</strong> и <strong>zuW</strong> &mdash; отменяет действие zG и zW соответственно.</p></li>
</ul>

<h2 id="смена-темы-оформления">Смена темы оформления</h2>

<p>Энтузиастами сделано много тем оформления для Vim. Мне нравится <a href="https://github.com/danilo-augusto/vim-afterglow" target="_blank">Afterglow</a> &mdash; порт одноименной темы из Sublime Text.</p>

<p>Для установки темы в .vimrc пропишем перед <code>call plug#end()</code>:</p>

<pre><code>Plug 'danilo-augusto/vim-afterglow'
</code></pre>

<p>Сохраняем файл, применяем новую версию настроек и устанавливаем плагин.</p>

<p>Теперь прописываем в конце файла .vimrc:</p>

<pre><code>colorscheme afterglow
</code></pre>

<p>Сохраняем изменения, применяем новые настройки. Оформление должно измениться.</p>

<p>Если оформление не изменилось, то возможно в терминале установлена восьмицветовая схема. Можно дописать в .vimrc следующее:</p>

<pre><code>set t_Co=256
</code></pre>

<p>Изменения нужно сохранить и применить новые настройки.</p>

<h2 id="корректный-перенос-текста">Корректный перенос текста</h2>

<p>Изначально Vim переносит текст по буквам. Это неудобно для редактирования текстов. Для переноса текста по словам, нужно прописать в .vimrc:</p>

<pre><code class="language-bash">set wrap linebreak
</code></pre>

<h2 id="заключение">Заключение</h2>

<p>Vim &mdash; очень гибкий редактор, который каждый может приспособить под свои нужды. В данном случае я рассматривал Vim как редактор &laquo;по умолчанию&raquo;, который можно использовать как для редактирования кода, так и для написания небольших текстов вроде постов в блог.</p>

<p>Вообще Vim можно приспособить под разные нужды и использовать, например, для таких вещей как навигация по файлам и их массовое переименование, но эти темы выходят за рамки заметки.</p>

                
                <div id="comments">
    
    
    
    <div id="disqus_thread"></div>
    <script type="text/javascript">
      var disqus_shortname = 'marinin-pw';
      var disqus_identifier = 'https:\/\/ilmarin.github.io\/post\/healthy-vim\/';
      var disqus_title = 'Допиливание Vim';
      var disqus_url = 'https:\/\/ilmarin.github.io\/post\/healthy-vim\/';
      function disqus_config() {
        this.callbacks.onReady = [function() {
              $.scrolline();   
        }];  
      };
      (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    
    
</div>

                    <footer id="footer">
        <section id="footer-message">
            &copy; Илья Маринин. All rights reserved. Powered by <a href="http://gohugo.io" target="_blank">Hugo</a>. <a href="https://github.com/kathyqian/crisp-ghost-theme" target="_blank">Crisp</a> theme by <a href="http://kathyqian.com" target="_blank">Kathy Qian</a> (ported by <a href="http://profiles.google.com/thibault.normand">Thibault Normand</a>).
        </section>
    </footer>

    <script>
      (function(c,f){asyncLoader=function(i,h){i.foreach(function(k,j){e(j,d(j),h)});if(typeof h.callback=="function"){var g=setInterval(function(){if(f.readyState==="complete"){clearInterval(g);h.callback()}},10)}};var d=function(g){var h=g.split(".");return h[h.length-1]},e=function(h,i,g){switch(i){case"js":a(h,g);break;case"css":b(h);break;default:break}},a=function(i,h){var g=document.createElement("script");g.type="text/javascript";g.async=true;g.src=i;document.getElementsByTagName("head")[0].appendChild(g)},b=function(g){var h=document.createElement("link");h.type="text/css";h.rel="stylesheet";h.href=g;document.getElementsByTagName("head")[0].appendChild(h)};Array.prototype.foreach=function(h){for(var g=0;g<this.length;g++){h(g,this[g])}}})(this,document);

      var WebFontConfig={google:{families:["Open Sans:400italic,700italic,400,700","Merriweather:700&amp;subset=cyrillic"]}};
      asyncLoader([
        "//netdna.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.css",
        "//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js",
        "//cdnjs.cloudflare.com/ajax/libs/webfont/1.6.27/webfontloader.js",
        "//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js"        
      ],{
        callback:function(){
          asyncLoader([
            "https:\/\/ilmarin.github.io\/css/rrssb.css",
            "https:\/\/ilmarin.github.io\/js/gist.min.js", 
            "https:\/\/ilmarin.github.io\/js/rrssb.min.js",                           
            "https:\/\/ilmarin.github.io\/js/jquery.scrolline.js",
            "//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/default.min.css"
          ], { callback:function() {
              hljs.initHighlighting();
          }});
        }
      });
    </script>
    <script type="text/javascript">(function (d, w, c) {
    (w[c] = w[c] || []).push(function() {
        try {
            w.yaCounter32796715 = new Ya.Metrika({
                id:32796715,
                clickmap:true,
                trackLinks:true,
                accurateTrackBounce:true
            });
        } catch(e) { }
    });

    var n = d.getElementsByTagName("script")[0],
        s = d.createElement("script"),
        f = function () { n.parentNode.insertBefore(s, n); };
    s.type = "text/javascript";
    s.async = true;
    s.src = "https://mc.yandex.ru/metrika/watch.js";

    if (w.opera == "[object Opera]") {
        d.addEventListener("DOMContentLoaded", f, false);
    } else { f(); }
})(document, window, "yandex_metrika_callbacks");</script><noscript><div><img src="https://mc.yandex.ru/watch/32796715" style="position:absolute; left:-9999px;" alt=""></div></noscript>
	</body>
</html>
            </div>
        </div>
    </body>
</html>

